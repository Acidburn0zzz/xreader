#!/usr/bin/python3

import sys
import gi

gi.require_version('Gtk', '3.0')
gi.require_version('EvinceDocument', '3.0')
gi.require_version('EvinceView', '3.0')

from gi.repository import Gtk
from gi.repository import EvinceDocument
from gi.repository import EvinceView

def callback_button_prev(widget, view):
	view.previous_page()

def callback_button_next(widget, model):
	model.set_fullscreen(True)

def callback_button_zoom_in(widget, view):
	view.zoom_in()

def callback_button_zoom_out(widget, view):
	view.zoom_out()


gladefile = "/usr/share/xreader/pyxreader.ui"
builder = Gtk.Builder()
builder.add_from_file(gladefile)
scrolled = builder.get_object("scrolledwindow1")
window = builder.get_object("window1")
button_prev = builder.get_object("toolbutton_prev")
button_next = builder.get_object("toolbutton_next")

EvinceDocument.init()
doc =  EvinceDocument.Document.factory_get_document(sys.argv[1])

view = EvinceView.View()
model = EvinceView.DocumentModel.new_with_document(doc)
view.set_model(model)


model.set_dual_page(True)
model.set_dual_page_odd_pages_left(True)
scrolled.add(view)


button_prev.connect("clicked", callback_button_prev, view)
button_next.connect("clicked", callback_button_next, model)

window.connect("destroy", Gtk.main_quit)
window.show_all()
Gtk.main()

